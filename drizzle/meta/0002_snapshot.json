{
  "id": "89e7710a-3e24-4ab4-8e6c-c3f57f16f5e7",
  "prevId": "2ab55a76-d752-4dfb-9c53-23eef612c0aa",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.poker_actions": {
      "name": "poker_actions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "game_id": {
          "name": "game_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "player_id": {
          "name": "player_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "action_type": {
          "name": "action_type",
          "type": "action_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "actions_game_id_idx": {
          "name": "actions_game_id_idx",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "actions_player_id_idx": {
          "name": "actions_player_id_idx",
          "columns": [
            {
              "expression": "player_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "actions_game_time_idx": {
          "name": "actions_game_time_idx",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "actions_game_player_time_idx": {
          "name": "actions_game_player_time_idx",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "player_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "poker_actions_game_id_poker_games_id_fk": {
          "name": "poker_actions_game_id_poker_games_id_fk",
          "tableFrom": "poker_actions",
          "tableTo": "poker_games",
          "columnsFrom": [
            "game_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "poker_actions_player_id_poker_players_id_fk": {
          "name": "poker_actions_player_id_poker_players_id_fk",
          "tableFrom": "poker_actions",
          "tableTo": "poker_players",
          "columnsFrom": [
            "player_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "actions_amount_positive": {
          "name": "actions_amount_positive",
          "value": "\"poker_actions\".\"amount\" IS NULL OR \"poker_actions\".\"amount\" >= 0"
        },
        "actions_bet_amount_required": {
          "name": "actions_bet_amount_required",
          "value": "(\"poker_actions\".\"action_type\" = 'bet' AND \"poker_actions\".\"amount\" IS NOT NULL) OR \"poker_actions\".\"action_type\" != 'bet'"
        }
      },
      "isRLSEnabled": false
    },
    "public.cards": {
      "name": "cards",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "game_id": {
          "name": "game_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "player_id": {
          "name": "player_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "rank": {
          "name": "rank",
          "type": "rank",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "suit": {
          "name": "suit",
          "type": "suit",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "cards_game_id_idx": {
          "name": "cards_game_id_idx",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "cards_player_id_idx": {
          "name": "cards_player_id_idx",
          "columns": [
            {
              "expression": "player_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "cards_game_player_idx": {
          "name": "cards_game_player_idx",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "player_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "cards_community_idx": {
          "name": "cards_community_idx",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"cards\".\"player_id\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "cards_game_id_poker_games_id_fk": {
          "name": "cards_game_id_poker_games_id_fk",
          "tableFrom": "cards",
          "tableTo": "poker_games",
          "columnsFrom": [
            "game_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "cards_player_id_poker_players_id_fk": {
          "name": "cards_player_id_poker_players_id_fk",
          "tableFrom": "cards",
          "tableTo": "poker_players",
          "columnsFrom": [
            "player_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "cards_unique_per_game": {
          "name": "cards_unique_per_game",
          "nullsNotDistinct": false,
          "columns": [
            "game_id",
            "rank",
            "suit"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.poker_games": {
      "name": "poker_games",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "status": {
          "name": "status",
          "type": "game_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'waiting'"
        },
        "current_round": {
          "name": "current_round",
          "type": "round_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'pre-flop'"
        },
        "current_highest_bet": {
          "name": "current_highest_bet",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "current_player_turn": {
          "name": "current_player_turn",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "pot": {
          "name": "pot",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "big_blind": {
          "name": "big_blind",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 20
        },
        "small_blind": {
          "name": "small_blind",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 10
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_action": {
          "name": "last_action",
          "type": "action_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'check'"
        },
        "last_bet_amount": {
          "name": "last_bet_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        }
      },
      "indexes": {
        "games_status_idx": {
          "name": "games_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "games_updated_at_idx": {
          "name": "games_updated_at_idx",
          "columns": [
            {
              "expression": "updated_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "games_current_player_idx": {
          "name": "games_current_player_idx",
          "columns": [
            {
              "expression": "current_player_turn",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.poker_players": {
      "name": "poker_players",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "game_id": {
          "name": "game_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "seat": {
          "name": "seat",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "stack": {
          "name": "stack",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1000
        },
        "current_bet": {
          "name": "current_bet",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "has_folded": {
          "name": "has_folded",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_connected": {
          "name": "is_connected",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "last_seen": {
          "name": "last_seen",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "is_button": {
          "name": "is_button",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "has_won": {
          "name": "has_won",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "show_cards": {
          "name": "show_cards",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "hand_rank": {
          "name": "hand_rank",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "hand_value": {
          "name": "hand_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "hand_name": {
          "name": "hand_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "players_game_id_idx": {
          "name": "players_game_id_idx",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "players_user_id_idx": {
          "name": "players_user_id_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "players_game_user_idx": {
          "name": "players_game_user_idx",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "players_active_idx": {
          "name": "players_active_idx",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "has_folded",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "players_button_idx": {
          "name": "players_button_idx",
          "columns": [
            {
              "expression": "game_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_button",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "poker_players_user_id_users_id_fk": {
          "name": "poker_players_user_id_users_id_fk",
          "tableFrom": "poker_players",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "poker_players_game_id_poker_games_id_fk": {
          "name": "poker_players_game_id_poker_games_id_fk",
          "tableFrom": "poker_players",
          "tableTo": "poker_games",
          "columnsFrom": [
            "game_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "players_unique_seat_per_game": {
          "name": "players_unique_seat_per_game",
          "nullsNotDistinct": false,
          "columns": [
            "game_id",
            "seat"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "players_stack_positive": {
          "name": "players_stack_positive",
          "value": "\"poker_players\".\"stack\" >= 0"
        },
        "players_current_bet_positive": {
          "name": "players_current_bet_positive",
          "value": "\"poker_players\".\"current_bet\" IS NULL OR \"poker_players\".\"current_bet\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.poker_timeouts": {
      "name": "poker_timeouts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "game_id": {
          "name": "game_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "player_id": {
          "name": "player_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "reported_by": {
          "name": "reported_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "timeout_at": {
          "name": "timeout_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "poker_timeouts_game_id_poker_games_id_fk": {
          "name": "poker_timeouts_game_id_poker_games_id_fk",
          "tableFrom": "poker_timeouts",
          "tableTo": "poker_games",
          "columnsFrom": [
            "game_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "poker_timeouts_player_id_poker_players_id_fk": {
          "name": "poker_timeouts_player_id_poker_players_id_fk",
          "tableFrom": "poker_timeouts",
          "tableTo": "poker_players",
          "columnsFrom": [
            "player_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "poker_timeouts_reported_by_poker_players_id_fk": {
          "name": "poker_timeouts_reported_by_poker_players_id_fk",
          "tableFrom": "poker_timeouts",
          "tableTo": "poker_players",
          "columnsFrom": [
            "reported_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "auth.users": {
      "name": "users",
      "schema": "auth",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_email_unique": {
          "name": "users_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.action_type": {
      "name": "action_type",
      "schema": "public",
      "values": [
        "bet",
        "check",
        "call",
        "raise",
        "fold",
        "timeout"
      ]
    },
    "public.rank": {
      "name": "rank",
      "schema": "public",
      "values": [
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "10",
        "J",
        "Q",
        "K",
        "A"
      ]
    },
    "public.suit": {
      "name": "suit",
      "schema": "public",
      "values": [
        "hearts",
        "diamonds",
        "clubs",
        "spades"
      ]
    },
    "public.game_status": {
      "name": "game_status",
      "schema": "public",
      "values": [
        "waiting",
        "active",
        "completed"
      ]
    },
    "public.round_type": {
      "name": "round_type",
      "schema": "public",
      "values": [
        "pre-flop",
        "flop",
        "turn",
        "river",
        "showdown"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}